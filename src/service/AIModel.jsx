import { GoogleGenerativeAI } from "@google/generative-ai";

  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  

    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "\nGenerate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget. Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, **Place Image Url, Geo Coordinates, ticket Pricing,** Time to travel each of the location for 3 days with each day plan with best time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, here's a budget-friendly 3-day Las Vegas itinerary for a couple, along with hotel options and detailed daily plans in JSON format. I've focused on free or low-cost activities and eating affordably.\n\n```json\n{\n  \"location\": \"Las Vegas, Nevada\",\n  \"budget\": \"Cheap/Budget-Friendly\",\n  \"duration\": \"3 Days\",\n  \"travelers\": \"Couple\",\n  \"hotel_options\": [\n    {\n      \"HotelName\": \"Circus Circus Hotel & Casino\",\n      \"HotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"Price\": \"$30 - $60 per night (depending on dates and deals)\",\n      \"hotel_image_url\": \"https://www.circuscircus.com/wp-content/uploads/2023/08/CC_Property_Hero_2000x600.jpg\",\n      \"geo_coordinates\": {\n        \"latitude\": 36.1262,\n        \"longitude\": -115.1654\n      },\n      \"rating\": 3.5,\n      \"descriptions\": \"Affordable hotel on the Strip, known for its circus acts, Adventuredome Theme Park (extra cost), and family-friendly atmosphere. Rooms are basic but clean. Good for those on a tight budget.\"\n    },\n    {\n      \"HotelName\": \"Excalibur Hotel & Casino\",\n      \"HotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"Price\": \"$40 - $70 per night (depending on dates and deals)\",\n      \"hotel_image_url\": \"https://www.vegas.com/wp-content/uploads/2023/07/excalibur-exterior.jpg\",\n      \"geo_coordinates\": {\n        \"latitude\": 36.0983,\n        \"longitude\": -115.1746\n      },\n      \"rating\": 4.0,\n      \"descriptions\": \"Medieval-themed hotel on the south end of the Strip. Offers affordable rooms and several dining options. Convenient location for exploring other nearby hotels like Luxor and Mandalay Bay.\"\n    },\n    {\n      \"HotelName\": \"Stratosphere Casino, Hotel & Tower\",\n      \"HotelAddress\": \"2000 S Las Vegas Blvd, Las Vegas, NV 89104\",\n      \"Price\": \"$35 - $65 per night (depending on dates and deals)\",\n      \"hotel_image_url\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/26/26/93/32/exterior.jpg?w=700&h=-1&s=1\",\n      \"geo_coordinates\": {\n        \"latitude\": 36.1474,\n        \"longitude\": -115.1559\n      },\n      \"rating\": 3.5,\n      \"descriptions\": \"Located at the northern end of the Strip. Offers great views from the tower (separate fee for the observation deck or rides). Rooms are basic but generally clean and comfortable. Can be a bit further from the main attractions but often has lower prices.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Exploring the Strip (South End)\",\n      \"best_time_to_visit\": \"Morning and Evening\",\n      \"places\": [\n        {\n          \"placeName\": \"Welcome to Fabulous Las Vegas Sign\",\n          \"placeDetails\": \"Iconic sign for a photo opportunity. Arrive early to avoid crowds.\",\n          \"place_image_url\": \"https://www.lasvegas.com/wp-content/uploads/2023/07/welcome-sign-1.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.0826,\n            \"longitude\": -115.1732\n          },\n          \"ticketPricing\": \"Free\",\n          \"time_to_travel\": \"N/A (Starting Point)\"\n        },\n        {\n          \"placeName\": \"Luxor Hotel & Casino\",\n          \"placeDetails\": \"Explore the Egyptian-themed architecture.\",\n          \"place_image_url\": \"https://www.casino.org/news/wp-content/uploads/2023/04/luxor-las-vegas-pyramid-entrance-scaled.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.0956,\n            \"longitude\": -115.1759\n          },\n          \"ticketPricing\": \"Free (to walk around)\",\n          \"time_to_travel\": \"5 minutes (walk from the Welcome Sign)\"\n        },\n        {\n          \"placeName\": \"Mandalay Bay\",\n          \"placeDetails\": \"Walk through the Mandalay Bay, see the Shark Reef Aquarium (optional, paid entry).\",\n          \"place_image_url\": \"https://assets.atdw-online.com.au/images/5f121c3c8701215404810d25a18f5bb3.jpeg?rect=0,0,1600,1200&w=745&h=559&rot=360\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.0906,\n            \"longitude\": -115.1746\n          },\n          \"ticketPricing\": \"Free (to walk around), Shark Reef Aquarium: $29\",\n          \"time_to_travel\": \"5 minutes (walk from Luxor)\"\n        },\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"Beautiful free botanical display that changes seasonally.\",\n          \"place_image_url\": \"https://www.reviewjournal.com/wp-content/uploads/2016/01/5990608_web1_bellagio_conservatory_jan21_13jp_1024x768.jpg?crop=1\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1127,\n            \"longitude\": -115.1763\n          },\n          \"ticketPricing\": \"Free\",\n          \"time_to_travel\": \"30 minutes (take the Duece bus from Mandalay Bay to Bellagio)\"\n        },\n        {\n          \"placeName\": \"Fountains of Bellagio\",\n          \"placeDetails\": \"Spectacular free water show set to music. Shows every 30 minutes in the afternoon and every 15 minutes in the evening.\",\n          \"place_image_url\": \"https://media.cntraveler.com/photos/5a8d6c7c9165344071ab5555/16:9/w_2560,c_limit/Bellagio-Fountains-GettyImages-888348010.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1126,\n            \"longitude\": -115.1761\n          },\n          \"ticketPricing\": \"Free\",\n          \"time_to_travel\": \"N/A (Located at Bellagio)\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Downtown Las Vegas (Fremont Street)\",\n      \"best_time_to_visit\": \"Afternoon and Evening\",\n      \"places\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"Light and sound show on a giant LED canopy. Free concerts and street performers.\",\n          \"place_image_url\": \"https://www.casino.org/news/wp-content/uploads/2023/02/Fremont-Street-Experience-Viva-Vision-scaled.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1701,\n            \"longitude\": -115.1423\n          },\n          \"ticketPricing\": \"Free (Viva Vision shows)\",\n          \"time_to_travel\": \"30-45 minutes (take the Duece bus from the Strip)\"\n        },\n        {\n          \"placeName\": \"SlotZilla Zip Line\",\n          \"placeDetails\": \"Optional: Zip line over Fremont Street (paid).\",\n          \"place_image_url\": \"https://vegasexperience.com/wp-content/uploads/2023/04/slotzilla-vegas-experience-fremont-street.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1704,\n            \"longitude\": -115.1420\n          },\n          \"ticketPricing\": \"$39-$59\",\n          \"time_to_travel\": \"N/A (Located on Fremont Street)\"\n        },\n        {\n          \"placeName\": \"Downtown Container Park\",\n          \"placeDetails\": \"Unique outdoor shopping and entertainment area built from shipping containers.  Free playground for kids, but fun for adults too.\",\n          \"place_image_url\": \"https://downtowncontainerpark.com/wp-content/uploads/2022/09/DCP_Exterior-Web.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1672,\n            \"longitude\": -115.1403\n          },\n          \"ticketPricing\": \"Free (to enter)\",\n          \"time_to_travel\": \"5 minutes (walk from Fremont Street Experience)\"\n        },\n        {\n          \"placeName\": \"Gold & Silver Pawn Shop (Pawn Stars)\",\n          \"placeDetails\": \"See the famous pawn shop from the TV show. (Expect crowds)\",\n          \"place_image_url\": \"https://i.ytimg.com/vi/gNKh68TnmQA/maxresdefault.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1689,\n            \"longitude\": -115.1535\n          },\n          \"ticketPricing\": \"Free (to enter)\",\n          \"time_to_travel\": \"15 minutes (walk or short bus ride from Fremont Street)\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"Exploring the Strip (Central & North) & Departure\",\n      \"best_time_to_visit\": \"Morning and Afternoon\",\n      \"places\": [\n        {\n          \"placeName\": \"The Venetian & The Palazzo\",\n          \"placeDetails\": \"Explore the canals, bridges, and shops. Window shopping and taking photos is free.\",\n          \"place_image_url\": \"https://media.cntraveler.com/photos/5a967c28db9f132444325467/master/w_2240,h_1493,c_limit/Venetian-Hotel-GettyImages-540442039.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1214,\n            \"longitude\": -115.1738\n          },\n          \"ticketPricing\": \"Free (to walk around)\",\n          \"time_to_travel\": \"30-45 minutes (Duece bus from Downtown)\",\n          \"notes\": \"Start early to avoid crowds.\"\n        },\n        {\n          \"placeName\": \"Mirage Volcano\",\n          \"placeDetails\": \"Free volcano show that erupts with fire and smoke. Check showtimes online.\",\n          \"place_image_url\": \"https://assets.atdw-online.com.au/images/Original/5ed64f077c888438c00a3570e8e801b6.jpeg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1212,\n            \"longitude\": -115.1751\n          },\n          \"ticketPricing\": \"Free\",\n          \"time_to_travel\": \"5 minutes (walk from Venetian/Palazzo)\",\n          \"notes\": \"Check showtimes in advance.\"\n        },\n        {\n          \"placeName\": \"High Roller Observation Wheel (Optional)\",\n          \"placeDetails\": \"30 minutes ride with spectacular views of the city. Located at the LINQ Promenade.\",\n          \"place_image_url\": \"https://media.tacdn.com/media/attractions-splice-spp-674x446/07/21/18/98.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1162,\n            \"longitude\": -115.1694\n          },\n          \"ticketPricing\": \"$25-$37\",\n          \"time_to_travel\": \"15 minutes (walk from Mirage)\",\n          \"notes\": \"Optional if time and budget allows. Consider pre-purchasing tickets online for discounts.\"\n        },\n        {\n          \"placeName\": \"Departure\",\n          \"placeDetails\": \"Head to the airport or your next destination.\",\n          \"place_image_url\": null,\n          \"geo_coordinates\": null,\n          \"ticketPricing\": \"N/A\",\n          \"time_to_travel\": \"N/A\"\n        }\n      ]\n    }\n  },\n  \"food_budget_tips\": [\n    \"Eat at affordable restaurants or fast-food places off the Strip.\",\n    \"Take advantage of happy hour specials.\",\n    \"Visit grocery stores for snacks and drinks.\",\n    \"Consider sharing meals to save money.\",\n    \"Use coupons and discounts when available.\"\n  ],\n  \"transportation_tips\": [\n    \"Use the Deuce bus for transportation along the Strip and to Downtown.\",\n    \"Walk as much as possible.\",\n    \"Consider ride-sharing services (Uber/Lyft) for short distances (compare prices).\",\n    \"Avoid taxis if possible, as they can be expensive.\"\n  ],\n  \"general_tips\": [\n    \"Take advantage of free attractions and shows.\",\n    \"Set a daily budget and stick to it.\",\n    \"Look for deals and discounts online.\",\n    \"Stay hydrated by drinking plenty of water.\",\n    \"Wear comfortable shoes, as you'll be doing a lot of walking.\"\n  ]\n}\n```\n\n**Key Budget Considerations:**\n\n*   **Hotel:** I've provided options that are generally more affordable, but prices can fluctuate dramatically based on the time of year, day of the week, and any special events. Book in advance and compare prices across different websites.  Consider staying off the Strip for even cheaper options (but factor in transportation costs).\n*   **Food:** The itinerary encourages bringing snacks and drinks, utilizing happy hours, and eating at more affordable restaurants.\n*   **Transportation:** The Deuce bus is the primary recommendation for getting around. Walking is also heavily encouraged.\n*   **Attractions:** This plan emphasizes free attractions. Paid attractions (like the Shark Reef Aquarium or SlotZilla) are listed as optional.\n*   **Flexibility:** Be ready to adjust the itinerary based on your energy levels, interests, and any deals you find.\n\n**How to Use This JSON:**\n\n1.  **Copy and Paste:** Copy the entire JSON code block.\n2.  **Use a JSON Viewer/Parser:** Paste the code into an online JSON viewer (like `jsonlint.com` or `jsonformatter.org`) or a code editor that supports JSON formatting. This will make the data much more readable and easier to navigate.\n3.  **Programmatically:** If you're a developer, you can easily parse this JSON data into a data structure in your programming language (Python, JavaScript, etc.) and use it to dynamically generate a travel app, website, or presentation.\n\nI hope this comprehensive plan helps you have a fantastic and budget-friendly trip to Las Vegas!  Remember to check showtimes and operating hours for attractions in advance, as they can change. Enjoy!\n"},
          ],
        },
      ],
    });
  